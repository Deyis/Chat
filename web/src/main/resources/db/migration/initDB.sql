DROP TABLE conversations IF EXISTS;

CREATE TABLE conversations (
    id  INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1)   PRIMARY KEY,
    first_user_id INTEGER NOT NULL,
    second_user_id INTEGER,
    creation_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    lang VARCHAR(2) NOT NULL,
    last_message_number INTEGER,
    finished BOOLEAN DEFAULT FALSE NOT NULL
);

DROP TABLE messages IF EXISTS;

CREATE TABLE messages (
    id  INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1)   PRIMARY KEY,
    conversation_id INTEGER NOT NULL,
    user_id INTEGER NOT NULL,
    message VARCHAR(200) NOT NULL,
    message_number INTEGER,
    creation_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
