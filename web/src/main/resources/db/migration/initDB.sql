DROP TABLE conversations IF EXISTS;

CREATE TABLE conversations (
    id  INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1)   PRIMARY KEY,
    first_user_id INTEGER NOT NULL,
    second_user_id INTEGER,
    creation_date TIMESTAMP,
    lang VARCHAR(2) NOT NULL,
    last_message_number INTEGER,
    finished BOOLEAN DEFAULT FALSE NOT NULL
);

DROP TABLE messages IF EXISTS;

CREATE TABLE messages (
    id  INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1)   PRIMARY KEY,
    conversation_id INTEGER NOT NULL,
    user_id INTEGER NOT NULL,
    message VARCHAR(200) NOT NULL,
    message_number INTEGER,
    creation_date TIMESTAMP
);

DROP TABLE friendship IF EXISTS;

CREATE TABLE friendship (
    id  INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1)   PRIMARY KEY,
    user_id INTEGER NOT NULL,
    friend_id INTEGER NOT NULL
);

DROP TABLE notifications IF EXISTS;

CREATE TABLE notifications (
    id  INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1)   PRIMARY KEY,
    user_id INTEGER NOT NULL,
    receiver_id INTEGER NOT NULL,
    text VARCHAR(200) NOT NULL,
    pending BOOLEAN DEFAULT TRUE NOT NULL,
    accepted BOOLEAN DEFAULT FALSE NOT NULL,
    type VARCHAR(200) NOT NULL
);